# –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Superset Process Mining (SPM)

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –¥–ª—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Process Mining —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞. –°–∏—Å—Ç–µ–º–∞ –∏–º–∏—Ç–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö, —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ—Ç–æ–∫–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞—à–±–æ—Ä–¥–æ–≤ Process Mining.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
pm_volume-tests/
‚îú‚îÄ‚îÄ common/                      # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ api.py                  # –ë–∞–∑–æ–≤—ã–π API –∫–ª–∞—Å—Å —Å –º–µ—Ç–æ–¥–∞–º–∏ ETL
‚îÇ   ‚îú‚îÄ‚îÄ auth.py                 # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ clickhouse_monitor.py   # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ClickHouse –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ csv_utils.py            # –†–∞–±–æ—Ç–∞ —Å CSV —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ managers.py             # –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –ø–æ—Ç–æ–∫–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ metrics.py              # Prometheus –º–µ—Ç—Ä–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ report_engine.py        # Unified reporting system
‚îú‚îÄ‚îÄ logs/                       # –õ–æ–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ scenarios/                  # –°—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ load_test.py           # –ë–∞–∑–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∑–∞–≥—Ä—É–∑–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ process_metrics.py     # Process Mining –¥–∞—à–±–æ—Ä–¥—ã
‚îÇ   ‚îú‚îÄ‚îÄ tc_load_001_baseline.py # Baseline —Ç–µ—Å—Ç (1 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
‚îÇ   ‚îî‚îÄ‚îÄ tc_load_002_concurrent.py # Concurrent —Ç–µ—Å—Ç (3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
‚îú‚îÄ‚îÄ .env                        # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ config.py                   # –ó–∞–≥—Ä—É–∑—á–∏–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ config_multi.yaml          # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ config_ift.yaml            # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ locustfile.py              # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª Locust
‚îú‚îÄ‚îÄ requirements.txt           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ prometheus.yml             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
```

## –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### TC-LOAD-001: Baseline —Ç–µ—Å—Ç
**–¶–µ–ª—å:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç–∞–ª–æ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```bash
# –ó–∞–ø—É—Å–∫
export LOCUST_SCENARIO=tc_load_001
locust -u 1 -r 1 --headless -t 30m
```

–ú–µ—Ç—Ä–∏–∫–∏:
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ CSV (500MB —Ñ–∞–π–ª)
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å DAG #1 (–∏–º–ø–æ—Ä—Ç –≤ ClickHouse) - SLA < 5 –º–∏–Ω
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å DAG #2 (PM Dashboard) - SLA < 3 –º–∏–Ω
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞—à–±–æ—Ä–¥–∞ - SLA < 3 —Å–µ–∫

### TC-LOAD-002: Concurrent —Ç–µ—Å—Ç

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

```bash
# –ó–∞–ø—É—Å–∫
export LOCUST_SCENARIO=tc_load_002
locust -u 3 -r 3 --headless -t 30m
```

**SLA –∫—Ä–∏—Ç–µ—Ä–∏–∏:** –ù–µ –±–æ–ª–µ–µ +50% –æ—Ç baseline –º–µ—Ç—Ä–∏–∫.

### –î—Ä—É–≥–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
- **load_test**: –ë–∞–∑–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- **process_metrics**: –°–æ–∑–¥–∞–Ω–∏–µ Process Mining –¥–∞—à–±–æ—Ä–¥–æ–≤
- **mixed**: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:

```env
# –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
BASE_URL=https://your-superset-instance.com
CSV_FILE_PATH=./process_log.csv

# –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
USER1_PASSWORD=change_me_1

# ClickHouse
CLICKHOUSE_ENABLED=true
CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=8123
CLICKHOUSE_USER=default
CLICKHOUSE_PASSWORD=default

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
MAX_ITERATIONS=1
```

### 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–π—Ç–µ CSV —Ñ–∞–π–ª —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ Process Mining:

```bash
#–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–∞
# –ó–∞–ø—É—Å–∫ —Å –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏
python3.11 data/PM_file-generator/main.py --config 20GB
python3.11 data/PM_file-generator/main.py --config 30GB
python3.11 data/PM_file-generator/main.py --config 50GB

# –ó–∞–ø—É—Å–∫ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º
python3.11 data/PM_file-generator/main.py --size 5
python3.11 data/PM_file-generator/main.py --size 2.5

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—ã—Ö–æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
python3.11 data/PM_file-generator/main.py --config 10GB --output ./my_data/
```

### 4. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

**Baseline —Ç–µ—Å—Ç (–æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å):**

```bash
export LOCUST_SCENARIO=tc_load_001
locust -u 1 -r 1 --headless -t 30m
```

**Concurrent —Ç–µ—Å—Ç (—Ç—Ä–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è):**

```bash
export LOCUST_SCENARIO=tc_load_002
locust -u 3 -r 3 --headless -t 30m
```

**–° –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º Locust:**

```bash
export LOCUST_SCENARIO=tc_load_001
locust
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8089
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

1. `config_multi.yaml` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –º—É–ª—å—Ç–∏—Å—Ç–µ–Ω–¥–æ–≤
2. `config_ift.yaml` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è IFT-—Å—Ç–µ–Ω–¥–æ–≤
3. `.env` - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏

### –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```yaml
# –í config_multi.yaml –∏–ª–∏ config_ift.yaml
api:
  base_url: FROM_ENV  # –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∏–∑ BASE_URL –≤ .env
  flow_endpoint: "/etl/api/v1/flow/"

upload_control:
  timeout_small: 300    # 5 –º–∏–Ω—É—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
  timeout_large: 3600   # 60 –º–∏–Ω—É—Ç –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
  pm_timeout: 3600      # 1 —á–∞—Å –¥–ª—è Process Mining

max_iterations: FROM_ENV  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

clickhouse:
  enabled: true
  host: FROM_ENV  # CLICKHOUSE_HOST –≤ .env
  port: FROM_ENV  # CLICKHOUSE_PORT –≤ .env (default: 8123)
  user: FROM_ENV  # CLICKHOUSE_USER –≤ .env (default: default)
  password: FROM_ENV  # CLICKHOUSE_PASSWORD –≤ .env
  monitoring_interval: 10  # –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö

# Baseline –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (TC-LOAD-002+)
baseline_metrics:
  "500mb":
    file_size_mb: 500
    csv_upload: 24.9        # ‚Üê –û–±–Ω–æ–≤–∏—Ç–µ –∏–∑ –æ—Ç—á–µ—Ç–∞ TC-LOAD-001
    dag1_duration: 31.8     # ‚Üê P95 –∏–∑ –æ—Ç—á–µ—Ç–∞ TC-LOAD-001
    dag2_duration: 46.1     # ‚Üê P95 –∏–∑ –æ—Ç—á–µ—Ç–∞ TC-LOAD-001
    dashboard_load: 0.5     # ‚Üê P95 –∏–∑ –æ—Ç—á–µ—Ç–∞ TC-LOAD-001
```

**–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å baseline:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ TC-LOAD-001 –∏ –ø–æ–ª—É—á–∏—Ç–µ –æ—Ç—á–µ—Ç
2. –ù–∞–π–¥–∏—Ç–µ P95 –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏
3. –û–±–Ω–æ–≤–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ `baseline_metrics` —Å–µ–∫—Ü–∏–∏
4. TC-LOAD-002 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç –∏—Ö –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### Prometheus –º–µ—Ç—Ä–∏–∫–∏

–°–∏—Å—Ç–µ–º–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –ø–æ—Ä—Ç 9090:

```bash
# –ó–∞–ø—É—Å–∫ Prometheus
prometheus --config.file=prometheus.yml

# –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫
curl http://localhost:9090/metrics
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- `superset_loadtest_requests_total` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- `superset_loadtest_request_duration_seconds` - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `superset_loadtest_chunk_uploads_total` - –∑–∞–≥—Ä—É–∑–∫–∏ —á–∞–Ω–∫–æ–≤
- `superset_loadtest_flow_creations_total` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤
- `superset_loadtest_active_users` - –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### ClickHouse –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏–∑ `system.tables` ClickHouse:
- –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫
- HTTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –æ—Ç—á–µ—Ç—ã –≤ **3 —Ñ–æ—Ä–º–∞—Ç–∞—Ö**:

**–î–ª—è TC-LOAD-001:**
```
./logs/tc_load_001_report_20241205_143022.txt   # –¢–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á–µ—Ç
./logs/tc_load_001_report_20241205_143022.json  # JSON –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
./logs/tc_load_001_runs_20241205_143022.csv     # CSV –¥–ª—è Excel –∞–Ω–∞–ª–∏–∑–∞
```

**–î–ª—è TC-LOAD-002:**
```
./logs/tc_load_002_report_20241205_150045.txt
./logs/tc_load_002_report_20241205_150045.json
./logs/tc_load_002_runs_20241205_150045.csv
```

**–û—Ç—á–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç:**
- **Performance Metrics**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ percentiles (P50, P75, P90, P95, P99)
- **SLO Compliance**: Pass/Fail –∫—Ä–∏—Ç–µ—Ä–∏–∏ –¥–ª—è CI/CD
- **Baseline Comparison**: —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ (TC-LOAD-002)
- **ClickHouse Metrics**: –º–µ—Ç—Ä–∏–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **Locust Statistics**: RPS, response times
- **User Breakdown**: per-user –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **Smart Recommendations**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. [REPORTING.md](REPORTING.md)

### SLO vs Baseline

**SLO (Service Level Objective)** - –∂–µ—Å—Ç–∫–∏–µ –ø–æ—Ä–æ–≥–∏ Pass/Fail –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤ –∫–æ–¥–µ —Ç–µ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `dag1_duration < 450s`)
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ CI/CD
- –ï—Å–ª–∏ SLO FAIL ‚Üí —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç, —Ä–µ–ª–∏–∑ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- –ü—Ä–∏–º–µ—Ä: `SLO dag1_duration (< 450s): PASS ‚úì`

**Baseline** - —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ TC-LOAD-001 –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–æ–≤:
- –•—Ä–∞–Ω—è—Ç—Å—è –≤ `config_multi.yaml` —Å–µ–∫—Ü–∏–∏ `baseline_metrics`
- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞—Å–∫–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –∏ —Ç—Ä–µ–Ω–¥–æ–≤
- –ü—Ä–∏–º–µ—Ä: `dag1_duration: 350s (baseline: 240s, +45%)`

**–ó–∞—á–µ–º –æ–±–∞?**
- **SLO** –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: "–ú–æ–∂–Ω–æ —Ä–µ–ª–∏–∑–∏—Ç—å?"
- **Baseline** –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: "–ù–∞—Å–∫–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–æ/–ø–ª–æ—Ö–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?"

## –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏ —Ñ–∞–π–ª–æ–≤

1. –ò–∑–º–µ–Ω–∏—Ç–µ `CSV_FILE_PATH` –≤ `.env`
2. –û–±–Ω–æ–≤–∏—Ç–µ `baseline_metrics` –≤ `config_multi.yaml` / `config_ift.yaml`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

```python
# –í scenarios/ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª
from common.api import Api
from locust import task

class CustomScenario(Api):
    @task
    def custom_flow(self):
        # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        pass
```

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Master node
locust -f locustfile.py --master --host=https://your-superset.com

# Worker nodes
locust -f locustfile.py --worker --master-host=192.168.1.100
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `BASE_URL` –≤ `.env`
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Superset –∏–Ω—Å—Ç–∞–Ω—Å–∞

2. **CSV —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω**
   - –£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –≤ `CSV_FILE_PATH`
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª—É
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

3. **ClickHouse –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `CLICKHOUSE_HOST` –∏ `CLICKHOUSE_PORT`
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ ClickHouse —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

4. **–¢–µ—Å—Ç –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `max_iterations`
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞–≤–µ—Ä—à–∞—é—Ç –∏—Ç–µ—Ä–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –ø–∞–ø–∫–µ `logs/`

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
```
./logs/locust_test_2024-12-05.log
```

–£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑:

```yaml
# –í config_multi.yaml
log_verbose: true
log_debug: false
log_level: "INFO"
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –≤ `scenarios/`
2. –ù–∞—Å–ª–µ–¥—É–π—Ç–µ—Å—å –æ—Ç `common.api.Api`
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã `@task`
4. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ `locustfile.py`
5. –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**–ü—Ä–∏–º–µ—Ä:**

```python
# scenarios/tc_load_003_highload.py
from common.api import Api
from locust import task

class TC_LOAD_003_HighLoad(Api):
    @task
    def highload_scenario(self):
        # –õ–æ–≥–∏–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
        pass
```

```python
# locustfile.py (–¥–æ–±–∞–≤—å—Ç–µ)
register_tasks({
    'tc_load_003': TC_LOAD_003_HighLoad
})
```

```yaml
# config_multi.yaml (–¥–æ–±–∞–≤—å—Ç–µ)
scenarios:
  tc_load_003:
    - tc_load_003
```

```groovy
# Jenkinsfile (–¥–æ–±–∞–≤—å—Ç–µ)
parameters {
    extendedChoice(
        name: 'SELECTED_SCENARIOS',
        type: 'PT_CHECKBOX',
        value: 'tc_load_003'
        defaultValue: '',
        description: '–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞'
    )
```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Ç–µ—Å—Ç–æ–≤:
- Confluence:
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Superset: https://superset.apache.org/
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Locust: https://docs.locust.io/

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
